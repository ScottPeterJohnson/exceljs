{"version":3,"sources":["../../lib/sax-shim.js"],"names":["Sax","require","oldCreateStream","createStream","strict","opts","stream","call","oldOn","on","evt","cb","node","normalizedTag","name","removeNamespace","normalizedAttributes","Object","entries","attributes","attribName","attrib","tagName","split","length","splice","join","module","exports"],"mappings":";;;;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEA,IAAMC,kBAAkBF,IAAIG,YAA5B;AACAH,IAAIG,YAAJ,GAAmB,UAASC,MAAT,EAAiBC,IAAjB,EAAsB;AACrC,QAAMC,SAASJ,gBAAgBK,IAAhB,CAAqB,IAArB,EAA2BH,MAA3B,EAAmCC,IAAnC,CAAf;;AAEA,QAAMG,QAAQF,OAAOG,EAArB;AACAH,WAAOG,EAAP,GAAY,UAASC,GAAT,EAAcC,EAAd,EAAiB;AACzBH,cAAMD,IAAN,CAAW,IAAX,EAAiBG,GAAjB,EAAsB,UAASE,IAAT,EAAe;AACjC,gBAAIF,QAAQ,SAAZ,EAAuB;AACnB,oBAAMG,gBAAgB,EAAtB;AACAA,8BAAcC,IAAd,GAAqBC,gBAAgBH,KAAKE,IAArB,CAArB;AACA,oBAAME,uBAAuB,EAA7B;AAHmB;AAAA;AAAA;;AAAA;AAInB,yCAAmCC,OAAOC,OAAP,CAAeN,KAAKO,UAApB,CAAnC,8HAAoE;AAAA;AAAA,4BAAxDC,UAAwD;AAAA,4BAA5CC,MAA4C;;AAChEL,6CAAqBD,gBAAgBK,UAAhB,CAArB,IAAoDC,MAApD;AACH;AANkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOnBR,8BAAcM,UAAd,GAA2BH,oBAA3B;AACAL,mBAAGE,aAAH;AACH,aATD,MAUK,IAAIH,QAAQ,UAAZ,EAAwB;AACzBC,mBAAGI,gBAAgBH,IAAhB,CAAH;AACH,aAFI,MAEE;AACHD,mBAAGC,IAAH;AACH;AACJ,SAhBD;AAiBH,KAlBD;AAmBA,WAAON,MAAP;AACH,CAxBD;AAyBA,SAASS,eAAT,CAAyBO,OAAzB,EAAiC;AAC7B,QAAMC,QAAQD,QAAQC,KAAR,CAAc,GAAd,CAAd;AACA,QAAGA,MAAMC,MAAN,KAAiB,CAApB,EAAsB;AAAE,eAAOD,MAAM,CAAN,CAAP;AAAkB,KAA1C,MACK;AAAE,eAAOA,MAAME,MAAN,CAAa,CAAb,EAAgBC,IAAhB,CAAqB,GAArB,CAAP;AAAmC;AAC7C;;AAGDC,OAAOC,OAAP,GAAiB5B,GAAjB","file":"sax-shim.js","sourcesContent":["var Sax = require(\"sax\");\n\nconst oldCreateStream = Sax.createStream;\nSax.createStream = function(strict, opts){\n    const stream = oldCreateStream.call(this, strict, opts);\n\n    const oldOn = stream.on;\n    stream.on = function(evt, cb){\n        oldOn.call(this, evt, function(node) {\n            if (evt === 'opentag') {\n                const normalizedTag = {};\n                normalizedTag.name = removeNamespace(node.name);\n                const normalizedAttributes = {};\n                for (const [attribName, attrib] of Object.entries(node.attributes)) {\n                    normalizedAttributes[removeNamespace(attribName)] = attrib;\n                }\n                normalizedTag.attributes = normalizedAttributes;\n                cb(normalizedTag);\n            }\n            else if (evt === \"closetag\") {\n                cb(removeNamespace(node));\n            } else {\n                cb(node);\n            }\n        });\n    };\n    return stream;\n};\nfunction removeNamespace(tagName){\n    const split = tagName.split(\":\");\n    if(split.length === 1){ return split[0]; }\n    else { return split.splice(1).join(\":\"); }\n}\n\n\nmodule.exports = Sax;"]}